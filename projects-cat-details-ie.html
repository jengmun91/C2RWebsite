<!---->
<!doctype html>
<html lang="en">
  <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
      <link rel="shortcut icon" href="images/favicon.ico">
      
      <!-- Bootstrap CSS -->
    
      <link rel="stylesheet" href="base/css/bootstrap.min.css">
      <link rel="stylesheet" href="base/css/bootstrap-grid.min.css">
      
      <!-- Global CSS -->  
      <link rel="stylesheet" href="ui/css/global/ui-extend.css">
      <link rel="stylesheet" href="ui/css/global/ui.css">
      <link rel="stylesheet" href="ui/css/global/ui-tablet.css">
      <link rel="stylesheet" href="ui/css/global/ui-mobile.css">
      <link rel="stylesheet" href="ui/css/global/utilities.css">
      
      <!-- Individual CSS -->  
      <link rel="stylesheet" href="ui/css/projects-cat-details.css">
      
      <!-- Ekko Lightbox -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" rel="stylesheet">

      <!-- Magnific Popup core CSS file -->
      <link rel="stylesheet" href="external/Magnific-Popup-master/dist/magnific-popup.css">
      
      <!-- External Plugin -->
      <link rel="stylesheet" href="external/wave_effect/style.css">

      
      <!--GOOGLE Font-->
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
      
      <!-- Fontawesome -->
      <link href="fonts/font-awesome/css/all.css" rel="stylesheet"> 
      
      <!-- Fonts-icon -->
      <link rel="stylesheet" href="fonts/material/material-design.css">

      <title>Welcome to C2R Lighting Asia</title> 
  </head>
  <body class="projects-cat-detail">  
    <div>
        <!--GLOBAL TOP MENU-->
              <!--GLOBAL TOP MENU-->
              <nav class="top-menu navbar navbar-expand-md navbar-light">
                <a class="navbar-brand" href="index.html"><img src="images/top-menu-logo.png" /></a>
                 <div class="mobile-menu mobile-tablet-only d-block d-lg-none">
                     <div class="menu-gp">
                         <ul>
                            <li>
                                <a href="who-are-we-m.html">Who We Are</a>
                                <a href="what-we-do-m.html">What We Do</a>
                                <a href="partners.html">Partners</a>
                                <a href="projects.html">Projects</a>
                                <a href="clients.html">Clients</a>
                                <a href="social-responsibility.html">Social Responsibility</a>
                                <a href="contact-us.html">Contact Us</a>
                            </li>
                        </ul>
    
                    </div>
                    <button type="" class="menu-btn" onclick="menuToggle()">
                        <i class="icon md-menu" aria-hidden="true"></i>
                        <i class="icon md-close" aria-hidden="true"></i>
                    </button>
                </div>    
                <div class="pc-only collapse navbar-collapse justify-content-between d-none d-lg-block" id="nav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link text-light" href="who-are-we.html">Who We Are</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" href="what-we-do.html">What We Do</a>
                        </li>
                    
                        <li class="nav-item">
                            <a class="nav-link text-light" href="partners.html">Partners</a>
                        </li>
                         <li class="nav-item active">
                            <a class="nav-link text-light" href="projects.html">Projects</a>
                        </li>
                           <li class="nav-item">
                            <a class="nav-link text-light" href="clients.html">Clients</a>
                        </li>
                         <li class="nav-item">
                            <a class="nav-link text-light" href="social-responsibility.html">Social Responsibility</a>
                        </li>
                          <li class="nav-item">
                            <a class="nav-link text-light" href="contact-us.html">Contact Us</a>
                        </li>
                       
                    </ul>
                </div>
            </nav>   
        
        <div class="container-fluid bgProjects">
            <div class="page-title">
                <div class="tagline gradient orange-pink" id="country_name"></div>

                <div class="tagline-desc ourProSubTag animatedOurProject js-inview fadeInUp" data-animate="fadeInUp">Play with lighting is a wonderful story, every project will help you tell it.</div>
            </div>
            <!--<div class="popup-gallery">
                <a href="http://farm9.staticflickr.com/8242/8558295633_f34a55c1c6_b.jpg" title="The Cleaner"><img src="http://farm9.staticflickr.com/8242/8558295633_f34a55c1c6_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8382/8558295631_0f56c1284f_b.jpg" title="Winter Dance"><img src="http://farm9.staticflickr.com/8382/8558295631_0f56c1284f_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8225/8558295635_b1c5ce2794_b.jpg" title="The Uninvited Guest"><img src="http://farm9.staticflickr.com/8225/8558295635_b1c5ce2794_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8383/8563475581_df05e9906d_b.jpg" title="Oh no, not again!"><img src="http://farm9.staticflickr.com/8383/8563475581_df05e9906d_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8235/8559402846_8b7f82e05d_b.jpg" title="Swan Lake"><img src="http://farm9.staticflickr.com/8235/8559402846_8b7f82e05d_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8235/8558295467_e89e95e05a_b.jpg" title="The Shake"><img src="http://farm9.staticflickr.com/8235/8558295467_e89e95e05a_s.jpg" width="75" height="75"></a>
                <a href="http://farm9.staticflickr.com/8378/8559402848_9fcd90d20b_b.jpg" title="Who's that, mommy?"><img src="http://farm9.staticflickr.com/8378/8559402848_9fcd90d20b_s.jpg" width="75" height="75"></a>
            </div>-->
        </div>
        <section>
            <div class="container">
               <div class="row justify-content-center">
                    
                    <div class="col-12 col-md-3">
                         <select id="country_selection" onchange="handleCountryChange(event)">
                             <!--<option disabled selected hidden>Country</option>-->
                         </select>
                     </div>
                    <div class="col-12 col-md-3">
                         <select id="type_selection" onchange="handleTypeChange(event)">
                           <!--  <option disabled  hidden>Type</option>-->
                         </select>
                     </div>
                </div>
                <div class="row project-gp popup-gallery" >
                    <div class="col-12 col-sm-4 itm-gp" id="display-container-col1" ></div>
                    <div class="col-12 col-sm-4 itm-gp" id="display-container-col2" ></div>
                    <div class="col-12 col-sm-4 itm-gp" id="display-container-col3" ></div>
                </div>
            </div>
        </section>

        <!--GLOBAL FOOTER-->
            <!--GLOBAL FOOTER-->
        <section class="footer" >
            <div class="container-fluid">
                <div class="row">
                  <div class="col-12 col-lg-5">
                       <div class="row">
                           <div class="col-12 footer-title">
                               <h2>Let us light up your world</h2>
                           </div>
                           <div class="col-12 footer-desc">
                               <p>Contact us today and get expert solutions in lighting. Quality product solution, reliable customer service and maximum satisfication awaits you!</p>
                           </div>
                           <div class="col-12">&nbsp;</div>
                           <div class="col-12 footer-btn">
                               <a href="contact-us.html" class="ui-btn  waves-effect waves-light"><span>GET IN TOUCH</span><img src="images/btn-icon-arrow.png" class="arrow"></a>
                           </div>
                       </div>
                   </div>
                  <div class="col-12 col-lg-2">
                           <div class="row list-menu">
                           <div class="col-12 list-item"><a href="who-are-we.html" class="whoWeAreClass">Who We Are</a></div>
                           <div class="col-12 list-item"><a href="what-we-do.html" class="whatWeDo">What We Do</a></div>
                               <div class="col-12 list-item"><a href="partners.html">Partners</a></div>
                           
                           
                       </div>
                       </div>
                       <div class="col-12 col-lg-2">
                           <div class="row list-menu">
                           <div class="col-12 list-item"><a href="projects.html">Projects</a></div>
                           <div class="col-12 list-item"><a href="clients.html">Clients</a></div>
                           <div class="col-12 list-item"><a href="social-responsibility.html">Social Responsibility</a></div>
                           
                       </div>
                       </div>
                       <div class="col-12 col-lg">
                           <div class="row">
                                <div class="col-12 icon-header">Follow us on</div>
                          </div>
                           <div class="row list-icon" >
                               <div class="col-auto list-item"><a href="https://www.facebook.com/C2RLightingAsia"  target="_blank"><i class="fab fa-facebook"></i></a></div>
                               <div class="col-auto list-item"><a href="https://instagram.com/c2rlightingasia?utm_medium=copy_link" target="_blank"><i class="fab fa-instagram"></i></a></div>
                           </div>
                       </div>
        
               </div>  
                <div class="row">
                   <div class="col-12 copyright">Copyright 2022. All Rights Reserved. C2R Lighting Asia</div>
               </div>
           </div>
            
       </section>

    </div>
  
      
      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
     
  
      <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
      <script src="base/js/jquery-3.4.1-min.js"></script>
      <script src="base/js/popper.min.js"></script>
      <script src="base/js/bootstrap.min.js"></script>
      
      
      <!-- External -->   
      <script type="text/javascript" src="external/mobile-detect/mobile-detect.js"></script>
      <script type="text/javascript" src="external/wave_effect/wave_effect.js"></script>
      <script type="text/javascript" src="external/express-useragent-master/lib/express-useragent.js"></script>
      
      <!--For On scroll In View--> 
      <script src='https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js'></script>
      <script src='external/jquery-inview-example/script.js'></script> 
      
      <!-- Ekko Lightbox -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.js"></script>

      <!-- Magnific Popup core JS file -->
      <script src="external/Magnific-Popup-master/dist/jquery.magnific-popup.js"></script>


    <!--UI-->
    <script type="text/javascript" src="ui/js/ui.js"></script>
    <script>
        function menuToggle(){
            $('.mobile-menu').toggleClass('open-nav');
        }
    </script>
      
      <script type="text/javascript">
          $(document).on('click', '[data-toggle="lightbox"]', function(event) {
              //alert("clicked"); //to test this function ran
              event.preventDefault();
              $(this).ekkoLightbox({
                  wrapping: true,
                  alwaysShowClose: false
              });
          });
      </script>
      <script type="text/javascript" src="data.js"></script>
      <script type="text/javascript">

        $(window).on('load', function(event){
            //const queryString = window.location.search;
            //const urlParams = new URLSearchParams(queryString);

            $.urlParam = function(name){
                var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
                if (results == null){
                return null;
                }
                else {
                return decodeURI(results[1]) || 0;
                }
            }

            var country_selected = "";
            var type_selected = "";

            if($.urlParam('country') !== null){
                country_selected = $.urlParam('country');//urlParams.get('country');
                console.log(country_selected);
                document.getElementById('country_name').innerHTML = country_selected;
                document.getElementById('country_selection').value = country_selected;
            }

            if($.urlParam('type') !== null){
                type_selected = $.urlParam('type');//urlParams.get('type');
                console.log(type_selected);
                document.getElementById('type_selection').value = type_selected;
            }

            loadTypeOption(country_selected, type_selected);
            loadCountry(country_selected);
            loadProject(country_selected, type_selected);
        })

        function loadCountry(country){
            var data = object.data;
            var str = ""
            for(var i=0; i<data.length; i++){
                if(data[i].country === country){
                    str += "<option selected>" + data[i].country + "</option>";
                }
                else{
                    str += "<option>" + data[i].country + "</option>";
                }
            }
            document.getElementById("country_selection").innerHTML = str;
        }

        function loadTypeOption(country, type){
            var data = object.data;
            var exists = false;
            var type_array = [];
            for(var i=0; i<data.length&&!exists; i++){
                if(data[i].country === country){
                    for(var j=0; j<data[i].type.length; j++){
                        //if(!type_array.includes(data[i].type[j].type_name)){
                        if(type_array.indexOf(data[i].type[j].type_name) < 0){
                            type_array.push(data[i].type[j].type_name);
                        }
                    }
                    exists = true;    
                }          
            }

            ////Set type option
            var option_str = "<option>All Types</option>";
            for(var i=0; i< type_array.length; i++){
                if(type_array[i] === type){
                    option_str += "<option selected>" + type_array[i] + "</option>";
                }
                else{
                    option_str += "<option>" + type_array[i] + "</option>";
                }
            }
            document.getElementById("type_selection").innerHTML = option_str;
        }

        function loadProject(country, type){
            var data = object.data;

            var exists = false;

            var col1_str = "", col2_str = "", col3_str = "";
            var img_array = [];

            for(var i=0; i<data.length&&!exists; i++){
                if(data[i].country === country){
                    for(var j=0; j<data[i].type.length; j++){
                        if(type === "All Types"){
                            for(var k=0; k<data[i].type[j].image_list.length; k++){
                                img_array.push(data[i].type[j].image_list[k]);
                                /*console.log((k+1)%3);
                                */
                            }
                            //Column 1
                            
                        }
                        else{
                            if(type === data[i].type[j].type_name){
                                for(var k=0; k<data[i].type[j].image_list.length; k++){
                                    img_array.push(data[i].type[j].image_list[k]);
                                }
                            }
                        }
                    }
                    exists = true;    
                }          
            }

            for(var i=0; i<img_array.length; i++){
                if((i+1)%3 === 1){
                    col1_str += "<div class='itm'>" +
                            "<div class='thumb' onclick='openLightBox(" + '"' + object.gallery_image_path + img_array[i].image_name + '"' + ")'>" +
                            //"<a href='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            "<img src='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            //"</a>" +
                            "</div>" +
                            "<div class='thumb-label'><span>" + img_array[i].display_name + "</span></div>" +
                            "</div>"
                }
                //Column 2
                else if((i+1)%3 === 2){
                    col2_str += "<div class='itm'>" +
                            "<div class='thumb' onclick='openLightBox(" + '"' + object.gallery_image_path + img_array[i].image_name + '"' + ")'>" +
                            //"<a href='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            "<img src='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            //"</a>" +
                            "</div>" +
                            "<div class='thumb-label'><span>" + img_array[i].display_name + "</span></div>" +
                            "</div>"
                }
                //Column 3
                else{
                    col3_str += "<div class='itm'>" +
                            "<div class='thumb' onclick='openLightBox(" + '"' + object.gallery_image_path + img_array[i].image_name + '"' + ")'>" +
                            //"<a href='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            "<img src='" + object.gallery_image_path + img_array[i].image_name + "'>" +
                            //"</a>" +
                            "</div>" +
                            "<div class='thumb-label'><span>" + img_array[i].display_name + "</span></div>" +
                            "</div>"
                }
            }
            document.getElementById('display-container-col1').innerHTML = col1_str;
            document.getElementById('display-container-col2').innerHTML = col2_str;
            document.getElementById('display-container-col3').innerHTML = col3_str; 
        }

        function handleCountryChange(event){
            event.preventDefault();
            var value = event.target.value;

            document.getElementById('country_name').innerHTML = value;

            loadTypeOption(value, "All Types");
            loadProject(value, "All Types");

        }

        function handleTypeChange(event){
            event.preventDefault();
            var value = event.target.value;

            var country_selected = $('#country_selection').val();

            loadProject(country_selected, value);
        }

        function openLightBox(image_selected){
            var country = $('#country_selection').val();
            var type = $('#type_selection').val();

            var data = object.data;
            var img_array = [];
            var exists = false;

            //Prepare image that need to display in light box
            for(var i=0; i<data.length&&!exists; i++){
                if(data[i].country === country){
                    for(var j=0; j<data[i].type.length; j++){
                        if(type === "All Types"){
                            for(var k=0; k<data[i].type[j].image_list.length; k++){
                                img_array.push({src: object.gallery_image_path + data[i].type[j].image_list[k].image_name});
                                /*console.log((k+1)%3);
                                */
                            }
                            //Column 1
                            
                        }
                        else{
                            if(type === data[i].type[j].type_name){
                                for(var k=0; k<data[i].type[j].image_list.length; k++){
                                    img_array.push({src: object.gallery_image_path + data[i].type[j].image_list[k].image_name});
                                }
                            }
                        }
                    }
                    exists = true;    
                }          
            }

            var detector = new MobileDetect(window.navigator.userAgent)
            console.log( "Mobile: " + detector.mobile());
            console.log( "Phone: " + detector.phone());

            //If phone detected, show image from top to bottom
            if(detector.mobile() !== null && detector.phone() !== null){
                var arr1 = [];
                var arr2 = [];
                var arr3 = [];
                for(var i=0; i<img_array.length; i++){
                    if((i+1)%3 === 1){
                        arr1.push(img_array[i]);
                    }
                    else if((i+1)%3 === 2){
                        arr2.push(img_array[i]);
                    }
                    else{
                        arr3.push(img_array[i]);
                    }
                }
                img_array = arr1.concat(arr2, arr3);
            }

            //Move selected image to first position in array
            while(img_array[0].src !== image_selected){
                var first_image = img_array[0];
                for(var i=0; i<img_array.length-1; i++){
                    img_array[i] = img_array[i+1];
                }
                img_array[img_array.length-1] = first_image;
            }

            //console.log(image_selected);
            //console.log(img_array);

            //Open lightBox
            $.magnificPopup.open({
                items: img_array,
                type: 'image',
                tLoading: 'Loading image #%curr%...',
                mainClass: 'mfp-img-mobile',
                gallery: {
                    enabled: true,
                    navigateByImgClick: true,
                    preload: [0,1] // Will preload 0 - before current, and 1 after the current image
                },
                image: {
                    tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
                    /*titleSrc: function(item) {
                        return item.el.attr('title');
                    }*/
                }
            });

        }
    </script>
    <script>
        $(document).ready(function() {
            // $('.popup-gallery').magnificPopup({
            //     delegate: 'a',
            //     type: 'image',
            //     tLoading: 'Loading image #%curr%...',
            //     mainClass: 'mfp-img-mobile',
            //     gallery: {
            //         enabled: true,
            //         navigateByImgClick: true,
            //         preload: [0,1] // Will preload 0 - before current, and 1 after the current image
            //     },
            //     image: {
            //         tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
            //         /*titleSrc: function(item) {
            //             return item.el.attr('title');
            //         }*/
            //     }
            // });

            
        });
    </script>
     </body>
</html>